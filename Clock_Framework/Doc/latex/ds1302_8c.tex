\hypertarget{ds1302_8c}{}\doxysection{Src/ds1302.c File Reference}
\label{ds1302_8c}\index{Src/ds1302.c@{Src/ds1302.c}}


DS1302 driver program body.  


{\ttfamily \#include \char`\"{}ds1302.\+h\char`\"{}}\newline
Include dependency graph for ds1302.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=154pt]{ds1302_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{ds1302_8c_a2f465ac3edd01714fa97bb5a1f7a6575}{ds1302\+\_\+write}} (unsigned char addr, unsigned char dat)
\begin{DoxyCompactList}\small\item\em 写数据 \end{DoxyCompactList}\item 
unsigned char \mbox{\hyperlink{ds1302_8c_a2f9cdd5ac22c8bdeca58736c7c7c2ea3}{ds1302\+\_\+read}} (unsigned char addr)
\begin{DoxyCompactList}\small\item\em DS1302 读寄存器 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ds1302_8c_a164a23460affd2b08fac6d2940a72cbe}{read\+\_\+time}} ()
\begin{DoxyCompactList}\small\item\em 读取时间 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ds1302_8c_a9ac8aa77f7621bc75420080365182d86}{write\+\_\+time}} ()
\begin{DoxyCompactList}\small\item\em 写入时间（时 分） \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ds1302_8c_a97f9f9c9cd86348ccb761e1212b91282}{ds1302\+\_\+writeram}} (unsigned char addr, unsigned char dat)
\begin{DoxyCompactList}\small\item\em 写 DS1302 RAM \end{DoxyCompactList}\item 
unsigned char \mbox{\hyperlink{ds1302_8c_a8d56baa401b69513613f3b60bf4f063b}{ds1302\+\_\+readram}} (unsigned char addr)
\begin{DoxyCompactList}\small\item\em 读 DS1302 RAM \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ds1302_8c_a0665eb059e742e4bb5a419144336e147}{ds1302\+\_\+init}} ()
\begin{DoxyCompactList}\small\item\em 初始化 DS1302 时间 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ds1302_8c_ac9acabbd906bfaedefa04a8fe81bf91c}{ds1302\+\_\+init\+\_\+io}} ()
\begin{DoxyCompactList}\small\item\em DS1302 IO 初始化 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
unsigned char \mbox{\hyperlink{ds1302_8c_ac9303e50f2245a0ec834e123e5c1f37f}{time\+\_\+sec}} = 0
\begin{DoxyCompactList}\small\item\em 当前时间（秒） \end{DoxyCompactList}\item 
unsigned char \mbox{\hyperlink{ds1302_8c_a58470cbc5cc9b332af96052e55f3505a}{time\+\_\+min}} = 0
\begin{DoxyCompactList}\small\item\em 当前时间（分） \end{DoxyCompactList}\item 
unsigned char \mbox{\hyperlink{ds1302_8c_aa479cd29773f3e2dda5dc30a78508e26}{time\+\_\+hour}} = 0
\begin{DoxyCompactList}\small\item\em 当前时间（时） \end{DoxyCompactList}\item 
unsigned char \mbox{\hyperlink{ds1302_8c_a7c98803c6ac3c66ae98d5d3bd107c5ae}{alarm\+\_\+min}} = 0
\begin{DoxyCompactList}\small\item\em 闹钟时间（分） \end{DoxyCompactList}\item 
unsigned char \mbox{\hyperlink{ds1302_8c_a1751afdca377b1e7626778e46ac89d32}{alarm\+\_\+hour}} = 0
\begin{DoxyCompactList}\small\item\em 闹钟时间（时） \end{DoxyCompactList}\item 
unsigned char code \mbox{\hyperlink{ds1302_8c_a3e90f991d489985994745a8309a618e8}{write\+\_\+addr}} \mbox{[}$\,$\mbox{]} = \{0x80, 0x82, 0x84, 0x86, 0x88, 0x8c, 0x8a\}
\begin{DoxyCompactList}\small\item\em 时钟芯片寄存器写地址（秒 分 时 日 月 年 星期） \end{DoxyCompactList}\item 
unsigned char code \mbox{\hyperlink{ds1302_8c_a35b2861fe98da42c805397c0b2a63563}{read\+\_\+addr}} \mbox{[}$\,$\mbox{]} = \{0x81, 0x83, 0x85, 0x87, 0x89, 0x8d, 0x8b\}
\begin{DoxyCompactList}\small\item\em 时钟芯片寄存器读地址（秒 分 时 日 月 年 星期） \end{DoxyCompactList}\item 
unsigned char code \mbox{\hyperlink{ds1302_8c_a2e39a7b8530857318c6824870021aa7c}{init\+\_\+ds}} \mbox{[}$\,$\mbox{]} = \{0x56, 0x34, 0x12, 0x10, 0x10, 0x21, 0x07\}
\begin{DoxyCompactList}\small\item\em 初始时间设置 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
DS1302 driver program body. 

\begin{DoxyVersion}{Version}
v1.\+0 
\end{DoxyVersion}
\begin{DoxyAuthor}{Author}
Xiaohei 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2021-\/11-\/20
\end{DoxyDate}
\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
Project git\+: github.\+com/mobyw/\+Digital\+Tube\+Clock 

Definition in file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ds1302_8c_a0665eb059e742e4bb5a419144336e147}\label{ds1302_8c_a0665eb059e742e4bb5a419144336e147}} 
\index{ds1302.c@{ds1302.c}!ds1302\_init@{ds1302\_init}}
\index{ds1302\_init@{ds1302\_init}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{ds1302\_init()}{ds1302\_init()}}
{\footnotesize\ttfamily void ds1302\+\_\+init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



初始化 DS1302 时间 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00189}{189}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ds1302_8c_a0665eb059e742e4bb5a419144336e147_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{ds1302_8c_a0665eb059e742e4bb5a419144336e147_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ds1302_8c_ac9acabbd906bfaedefa04a8fe81bf91c}\label{ds1302_8c_ac9acabbd906bfaedefa04a8fe81bf91c}} 
\index{ds1302.c@{ds1302.c}!ds1302\_init\_io@{ds1302\_init\_io}}
\index{ds1302\_init\_io@{ds1302\_init\_io}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{ds1302\_init\_io()}{ds1302\_init\_io()}}
{\footnotesize\ttfamily void ds1302\+\_\+init\+\_\+io (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



DS1302 IO 初始化 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00217}{217}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ds1302_8c_ac9acabbd906bfaedefa04a8fe81bf91c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ds1302_8c_a2f9cdd5ac22c8bdeca58736c7c7c2ea3}\label{ds1302_8c_a2f9cdd5ac22c8bdeca58736c7c7c2ea3}} 
\index{ds1302.c@{ds1302.c}!ds1302\_read@{ds1302\_read}}
\index{ds1302\_read@{ds1302\_read}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{ds1302\_read()}{ds1302\_read()}}
{\footnotesize\ttfamily unsigned char ds1302\+\_\+read (\begin{DoxyParamCaption}\item[{unsigned char}]{addr }\end{DoxyParamCaption})}



DS1302 读寄存器 


\begin{DoxyParams}{Parameters}
{\em addr} & 读取寄存器地址 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
读取寄存器数据 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{ds1302_8c_source_l00079}{79}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ds1302_8c_a2f9cdd5ac22c8bdeca58736c7c7c2ea3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ds1302_8c_a8d56baa401b69513613f3b60bf4f063b}\label{ds1302_8c_a8d56baa401b69513613f3b60bf4f063b}} 
\index{ds1302.c@{ds1302.c}!ds1302\_readram@{ds1302\_readram}}
\index{ds1302\_readram@{ds1302\_readram}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{ds1302\_readram()}{ds1302\_readram()}}
{\footnotesize\ttfamily unsigned char ds1302\+\_\+readram (\begin{DoxyParamCaption}\item[{unsigned char}]{addr }\end{DoxyParamCaption})}



读 DS1302 RAM 


\begin{DoxyParams}{Parameters}
{\em addr} & 读取寄存器地址 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
读取到的八位数据 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{ds1302_8c_source_l00177}{177}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=277pt]{ds1302_8c_a8d56baa401b69513613f3b60bf4f063b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ds1302_8c_a8d56baa401b69513613f3b60bf4f063b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ds1302_8c_a2f465ac3edd01714fa97bb5a1f7a6575}\label{ds1302_8c_a2f465ac3edd01714fa97bb5a1f7a6575}} 
\index{ds1302.c@{ds1302.c}!ds1302\_write@{ds1302\_write}}
\index{ds1302\_write@{ds1302\_write}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{ds1302\_write()}{ds1302\_write()}}
{\footnotesize\ttfamily void ds1302\+\_\+write (\begin{DoxyParamCaption}\item[{unsigned char}]{addr,  }\item[{unsigned char}]{dat }\end{DoxyParamCaption})}



写数据 

DS1302 写寄存器


\begin{DoxyParams}{Parameters}
{\em addr} & 写入寄存器地址 \\
\hline
{\em dat} & 写入寄存器数据 \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ds1302_8c_source_l00045}{45}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ds1302_8c_a2f465ac3edd01714fa97bb5a1f7a6575_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ds1302_8c_a97f9f9c9cd86348ccb761e1212b91282}\label{ds1302_8c_a97f9f9c9cd86348ccb761e1212b91282}} 
\index{ds1302.c@{ds1302.c}!ds1302\_writeram@{ds1302\_writeram}}
\index{ds1302\_writeram@{ds1302\_writeram}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{ds1302\_writeram()}{ds1302\_writeram()}}
{\footnotesize\ttfamily void ds1302\+\_\+writeram (\begin{DoxyParamCaption}\item[{unsigned char}]{addr,  }\item[{unsigned char}]{dat }\end{DoxyParamCaption})}



写 DS1302 RAM 


\begin{DoxyParams}{Parameters}
{\em addr} & 写入寄存器地址 \\
\hline
{\em dat} & 写入八位数据 ~\newline
 \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{ds1302_8c_source_l00160}{160}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=280pt]{ds1302_8c_a97f9f9c9cd86348ccb761e1212b91282_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ds1302_8c_a97f9f9c9cd86348ccb761e1212b91282_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ds1302_8c_a164a23460affd2b08fac6d2940a72cbe}\label{ds1302_8c_a164a23460affd2b08fac6d2940a72cbe}} 
\index{ds1302.c@{ds1302.c}!read\_time@{read\_time}}
\index{read\_time@{read\_time}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{read\_time()}{read\_time()}}
{\footnotesize\ttfamily void read\+\_\+time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



读取时间 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00112}{112}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=247pt]{ds1302_8c_a164a23460affd2b08fac6d2940a72cbe_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=213pt]{ds1302_8c_a164a23460affd2b08fac6d2940a72cbe_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{ds1302_8c_a9ac8aa77f7621bc75420080365182d86}\label{ds1302_8c_a9ac8aa77f7621bc75420080365182d86}} 
\index{ds1302.c@{ds1302.c}!write\_time@{write\_time}}
\index{write\_time@{write\_time}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{write\_time()}{write\_time()}}
{\footnotesize\ttfamily void write\+\_\+time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



写入时间（时 分） 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00127}{127}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=251pt]{ds1302_8c_a9ac8aa77f7621bc75420080365182d86_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=306pt]{ds1302_8c_a9ac8aa77f7621bc75420080365182d86_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{ds1302_8c_a1751afdca377b1e7626778e46ac89d32}\label{ds1302_8c_a1751afdca377b1e7626778e46ac89d32}} 
\index{ds1302.c@{ds1302.c}!alarm\_hour@{alarm\_hour}}
\index{alarm\_hour@{alarm\_hour}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{alarm\_hour}{alarm\_hour}}
{\footnotesize\ttfamily unsigned char alarm\+\_\+hour = 0}



闹钟时间（时） 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00023}{23}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

\mbox{\Hypertarget{ds1302_8c_a7c98803c6ac3c66ae98d5d3bd107c5ae}\label{ds1302_8c_a7c98803c6ac3c66ae98d5d3bd107c5ae}} 
\index{ds1302.c@{ds1302.c}!alarm\_min@{alarm\_min}}
\index{alarm\_min@{alarm\_min}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{alarm\_min}{alarm\_min}}
{\footnotesize\ttfamily unsigned char alarm\+\_\+min = 0}



闹钟时间（分） 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00022}{22}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

\mbox{\Hypertarget{ds1302_8c_a2e39a7b8530857318c6824870021aa7c}\label{ds1302_8c_a2e39a7b8530857318c6824870021aa7c}} 
\index{ds1302.c@{ds1302.c}!init\_ds@{init\_ds}}
\index{init\_ds@{init\_ds}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{init\_ds}{init\_ds}}
{\footnotesize\ttfamily unsigned char code init\+\_\+ds\mbox{[}$\,$\mbox{]} = \{0x56, 0x34, 0x12, 0x10, 0x10, 0x21, 0x07\}}



初始时间设置 

依次为： 秒 分 时 日 月 年 星期

使用 BCD 码, 如 55 即为 0x55 

Definition at line \mbox{\hyperlink{ds1302_8c_source_l00035}{35}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

\mbox{\Hypertarget{ds1302_8c_a35b2861fe98da42c805397c0b2a63563}\label{ds1302_8c_a35b2861fe98da42c805397c0b2a63563}} 
\index{ds1302.c@{ds1302.c}!read\_addr@{read\_addr}}
\index{read\_addr@{read\_addr}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{read\_addr}{read\_addr}}
{\footnotesize\ttfamily unsigned char code read\+\_\+addr\mbox{[}$\,$\mbox{]} = \{0x81, 0x83, 0x85, 0x87, 0x89, 0x8d, 0x8b\}}



时钟芯片寄存器读地址（秒 分 时 日 月 年 星期） 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00026}{26}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

\mbox{\Hypertarget{ds1302_8c_aa479cd29773f3e2dda5dc30a78508e26}\label{ds1302_8c_aa479cd29773f3e2dda5dc30a78508e26}} 
\index{ds1302.c@{ds1302.c}!time\_hour@{time\_hour}}
\index{time\_hour@{time\_hour}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{time\_hour}{time\_hour}}
{\footnotesize\ttfamily unsigned char time\+\_\+hour = 0}



当前时间（时） 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00020}{20}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

\mbox{\Hypertarget{ds1302_8c_a58470cbc5cc9b332af96052e55f3505a}\label{ds1302_8c_a58470cbc5cc9b332af96052e55f3505a}} 
\index{ds1302.c@{ds1302.c}!time\_min@{time\_min}}
\index{time\_min@{time\_min}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{time\_min}{time\_min}}
{\footnotesize\ttfamily unsigned char time\+\_\+min = 0}



当前时间（分） 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00019}{19}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

\mbox{\Hypertarget{ds1302_8c_ac9303e50f2245a0ec834e123e5c1f37f}\label{ds1302_8c_ac9303e50f2245a0ec834e123e5c1f37f}} 
\index{ds1302.c@{ds1302.c}!time\_sec@{time\_sec}}
\index{time\_sec@{time\_sec}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{time\_sec}{time\_sec}}
{\footnotesize\ttfamily unsigned char time\+\_\+sec = 0}



当前时间（秒） 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00018}{18}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

\mbox{\Hypertarget{ds1302_8c_a3e90f991d489985994745a8309a618e8}\label{ds1302_8c_a3e90f991d489985994745a8309a618e8}} 
\index{ds1302.c@{ds1302.c}!write\_addr@{write\_addr}}
\index{write\_addr@{write\_addr}!ds1302.c@{ds1302.c}}
\doxysubsubsection{\texorpdfstring{write\_addr}{write\_addr}}
{\footnotesize\ttfamily unsigned char code write\+\_\+addr\mbox{[}$\,$\mbox{]} = \{0x80, 0x82, 0x84, 0x86, 0x88, 0x8c, 0x8a\}}



时钟芯片寄存器写地址（秒 分 时 日 月 年 星期） 



Definition at line \mbox{\hyperlink{ds1302_8c_source_l00025}{25}} of file \mbox{\hyperlink{ds1302_8c_source}{ds1302.\+c}}.

